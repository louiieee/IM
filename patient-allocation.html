<!DOCTYPE html>
<html>
<head>
  <title>Ward Staff Allocation</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
  <link rel="stylesheet" href="patient-allocation.css">
</head>
<body>
  <main class="page allocation-page">
    <section class="allocation-form dark">
      <div class="container">
        <div class="block-heading">
          <h2>Ward Staff Allocation</h2>
          <p>Week Beginning: 16-Jan-96</p>
        </div>
        <form>
          <div class="details-container row">
            <div class="details-column col-md-6">
              <h3 class="title">
                Ward Number: 
                <select class="form-control">
                  <option>Ward 11</option>
                  <!-- Add more options as needed -->
                </select>
              </h3>
              <h3 class="title">Ward Name: Orthopaedic</h3>
              <h3 class="title">Location: Block E</h3>
            </div>
            <div class="details-column col-md-6">
              <h3 class="title">
                Charge Nurse: 
                <select class="form-control">
                  <option>Moira Samuel</option>
                  <!-- Add more options as needed -->
                </select>
              </h3>
              <h3 class="title">Staff Number: S011</h3>
              <h3 class="title">Tel Extn: 7711</h3>
            </div>
          </div>
          <div class="d-flex justify-content-end mb-2">
            <button type="button" class="btn btn-primary" id="add-row-btn">Add New Row</button>
          </div>
          <div class="table-responsive">
            <table class="table table-bordered" id="allocation-table">
              <thead>
                <tr>
                  <th>Patient Number</th>
                  <th>Name</th>
                  <th>On Waiting List</th>
                  <th>Expected Stay (Days)</th>
                  <th>Date Placed</th>
                  <th>Date Leave</th>
                  <th>Actual Leave</th>
                  <th>Bed Number</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <select class="form-control">
                      <option>P10451</option>
                      <!-- Add more options as needed -->
                    </select>
                  </td>
                  <td contenteditable="false">Robber Dumbree</td>
                  <td><input type="date" class="form-control" value="1996-01-12"></td>
                  <td contenteditable="true">5</td>
                  <td><input type="date" class="form-control"></td>
                  <td><input type="date" class="form-control" value="1996-01-17"></td>
                  <td><input type="date" class="form-control"></td>
                  <td contenteditable="true">84</td>
                  <td><button type="button" class="btn btn-danger delete-row-btn">Delete</button></td>
                </tr>
              </tbody>
            </table>
          </div>
        </form>
      </div>
    </section>
  </main>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script>
    document.getElementById('add-row-btn').addEventListener('click', function() {
      var table = document.getElementById('allocation-table').getElementsByTagName('tbody')[0];
      var newRow = table.insertRow();
      var newCell;
      
      // Patient Number
      newCell = newRow.insertCell(0);
      var select = document.createElement('select');
      select.className = 'form-control';
      var option = document.createElement('option');
      option.value = 'NewPatient';
      option.text = 'NewPatient';
      select.appendChild(option);
      newCell.appendChild(select);

      // Name
      newCell = newRow.insertCell(1);
      newCell.contentEditable = 'false';
      newCell.innerText = 'New Patient Name';

      // On Waiting List
      newCell = newRow.insertCell(2);
      var input = document.createElement('input');
      input.type = 'date';
      input.className = 'form-control';
      newCell.appendChild(input);

      // Expected Stay
      newCell = newRow.insertCell(3);
      newCell.contentEditable = 'true';
      newCell.innerText = '0';

      // Date Placed
      newCell = newRow.insertCell(4);
      input = document.createElement('input');
      input.type = 'date';
      input.className = 'form-control';
      newCell.appendChild(input);

      // Date Leave
      newCell = newRow.insertCell(5);
      input = document.createElement('input');
      input.type = 'date';
      input.className = 'form-control';
      newCell.appendChild(input);

      // Actual Leave
      newCell = newRow.insertCell(6);
      input = document.createElement('input');
      input.type = 'date';
      input.className = 'form-control';
      newCell.appendChild(input);

      // Bed Number
      newCell = newRow.insertCell(7);
      newCell.contentEditable = 'true';
      newCell.innerText = '0';

      // Action
      newCell = newRow.insertCell(8);
      var deleteBtn = document.createElement('button');
      deleteBtn.type = 'button';
      deleteBtn.className = 'btn btn-danger delete-row-btn';
      deleteBtn.innerText = 'Delete';
      deleteBtn.onclick = function() {
        table.deleteRow(newRow.rowIndex - 1);
      };
      newCell.appendChild(deleteBtn);
    });

    // Attach delete function to existing row
    document.querySelectorAll('.delete-row-btn').forEach(function(button) {
      button.addEventListener('click', function() {
        var row = button.parentNode.parentNode;
        row.parentNode.removeChild(row);
      });
    });
  </script>
</body>
</html>
